# OpenGL Cube Demo with Shader System

一个基于现代OpenGL的3D立方体演示程序，具有可配置的着色器系统和交互式UI界面。

## 项目概述

本项目是一个基于现代OpenGL的3D图形渲染演示程序，主要特点包括：

- 基于现代OpenGL (Core Profile) 的3D渲染
- 可配置的着色器系统，支持实时切换不同的着色器效果
- 交互式UI界面，使用Dear ImGui实现
- 相机控制系统，支持旋转和缩放
- 单例模式设计的模块化架构
- 配置文件驱动的着色器管理

## 系统架构

### 核心模块

1. **Application (应用程序核心)**
   - 单例模式实现
   - 负责初始化和协调各个模块
   - 管理主循环和资源清理

2. **Shader System (着色器系统)**
   - 支持动态加载和切换着色器
   - 通过配置文件管理着色器程序
   - 提供统一的着色器接口

3. **Camera System (相机系统)**
   - 实现3D场景的视角控制
   - 支持键盘和鼠标输入
   - 提供视图和投影矩阵

4. **UI System (用户界面系统)**
   - 基于Dear ImGui实现
   - 提供着色器参数调节界面
   - 支持实时预览效果

5. **Cube (立方体渲染)**
   - 实现基础几何体的渲染
   - 支持顶点和颜色数据
   - 提供渲染接口

### 技术栈

- OpenGL 3.3+ (Core Profile)
- GLFW (窗口管理)
- GLEW (OpenGL扩展加载)
- GLM (数学库)
- Dear ImGui (UI界面)
- CMake (构建系统)

## 构建说明

### 依赖项安装

在WSL2环境中：

```bash
sudo apt update
sudo apt install build-essential cmake libglfw3-dev libgl1-mesa-dev
```

### 编译步骤

```bash
mkdir build
cd build
cmake ..
make
```

### 运行

```bash
./opengl_skeleton
```

## 使用说明

### 控制方式

- 方向键：控制立方体旋转
- 鼠标滚轮：缩放视图
- ESC：退出程序

### 着色器配置

着色器配置文件位于 `shader_config.ini`，可以在此文件中：
- 添加新的着色器程序
- 配置着色器参数
- 设置默认值

### UI界面

程序运行时可以通过UI界面：
- 切换不同的着色器效果
- 调整着色器参数
- 实时预览效果

## 代码结构

```
.
├── main.cpp          # 程序入口和主循环
├── shader.h/cpp      # 着色器系统实现
├── camera.h/cpp      # 相机系统实现
├── cube.h/cpp        # 立方体渲染实现
├── ui.h/cpp          # UI系统实现
├── shaders/          # 着色器文件目录
├── shader_config.ini # 着色器配置文件
└── CMakeLists.txt    # CMake构建配置
```

## 设计模式

1. **单例模式**
   - 应用于所有核心模块
   - 确保全局唯一实例
   - 提供统一的访问接口

2. **观察者模式**
   - 用于事件处理系统
   - 实现输入事件的分发
   - 支持模块间的解耦

3. **策略模式**
   - 用于着色器系统
   - 支持动态切换渲染策略
   - 提供灵活的扩展性

## 性能优化

1. **渲染优化**
   - 使用现代OpenGL特性
   - 最小化状态切换
   - 优化缓冲区使用

2. **内存管理**
   - 智能指针管理资源
   - 及时释放不需要的资源
   - 避免内存泄漏

3. **着色器优化**
   - 预编译着色器程序
   - 缓存uniform位置
   - 批量更新uniform变量

## 扩展性

项目设计考虑了以下扩展点：

1. **着色器系统**
   - 支持添加新的着色器效果
   - 可以扩展着色器参数
   - 支持自定义着色器配置

2. **渲染系统**
   - 可以添加新的几何体
   - 支持不同的渲染模式
   - 可以扩展渲染效果

3. **UI系统**
   - 支持添加新的控制界面
   - 可以扩展参数调节
   - 支持自定义UI布局

## 注意事项

1. 确保系统支持OpenGL 3.3+
2. 正确配置着色器文件路径
3. 注意资源清理和内存管理
4. 遵循现代OpenGL最佳实践

## 贡献指南

1. Fork 项目
2. 创建特性分支
3. 提交更改
4. 推送到分支
5. 创建 Pull Request

## 许可证

本项目采用 MIT 许可证 